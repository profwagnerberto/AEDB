#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void CarregarIdades(int *paramDadosIdade){
  FILE *fl;
  int caracter;
  int tamanho = 1000;
  char temp[tamanho];
  int contaCarac;
  int contaIdade;
  fl = fopen("dadosIdade.txt", "r");
  contaCarac=0;
  strcpy(temp,"");
  contaIdade=0;
  while((caracter = fgetc(fl)) != EOF){
    if(caracter!=','){
      temp[contaCarac]=caracter;
      contaCarac++;
      printf("temp: %s \n",temp);
    }else{
      paramDadosIdade[contaIdade]=atoi(temp);
      printf("dadosIdade[%d]: %d \n",contaIdade,paramDadosIdade[contaIdade]);
      contaCarac=0;
      strcpy(temp,"");
      contaIdade++;
    }
  }        
  paramDadosIdade[contaIdade]=atoi(temp);
  printf("dadosIdade[%d]: %d \n",contaIdade,paramDadosIdade[contaIdade]);
  fclose(fl);
}

int main() {
  int opcao;
  int idadeABuscar;
  int i;
  char dados[] = "21,Fíneas";

  int Idade[] = {21};
  int dadosIdade[20];
  char Nome[][10] = {" "};
  int tamanho = sizeof(Idade)/sizeof(int);
  do{
    printf("\t MENU \n");
    printf("\t ---- \n");
    printf("\t 1-Carregar a tabela com a idade dos alunos da turma \n");
    printf("\t 2-Ler a idade a Buscar \n");
    printf("\t 3-Buscar na tabela sem hash \n");
    printf("\t 9-Encerrar \n");
    printf("\t ---- \n");
    printf("\t Informe a opção desejada: ");
    scanf("%d",&opcao);
    switch(opcao){
      case 1:
        CarregarIdades(dadosIdade);

        printf(" * \n Dados carregados. ");
        printf(" * \n * \n * \n");
        break;
      case 2:
        printf(" * \n Informe a idade a Buscar: ");
        scanf("%d",&idadeABuscar);
        printf(" * \n * \n * \n");
        break;
      case 3:
        i = 0;
        while(i<tamanho && Idade[i]!=idadeABuscar)
          i++;
        if(Idade[i]==idadeABuscar)
          printf(" * \n A idade do(a) %s, foi encontrada depois de %d iterações. \n",Nome[i],i+1);
        else
          printf(" * \n Idade NÃO encontrada. \n");
        printf(" * \n * \n * \n");
        break;
      case 9:
        printf("Encerrando... \n");
        printf(" * \n * \n * \n");
        break;
      default:
        printf("Erro: Opção inválida. \n");
        printf(" * \n * \n * \n");
        break;
    }
  }while(opcao!=9);
  return 0;
}
